# BTC Price Prediction Game - Implementation

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºBTCä»·æ ¼é¢„æµ‹çš„ç«çŒœæ¸¸æˆï¼Œç”¨äºåœ¨hackathonçš„pitchç¯èŠ‚å±•ç¤ºæˆ‘ä»¬çš„async-hyperliquidåº“çš„é«˜æ€§èƒ½ç‰¹ç‚¹ã€‚

## é¡¹ç›®ç»“æ„

```
balls_game/
â”œâ”€â”€ main.py                    # FastAPIåº”ç”¨å…¥å£
â”œâ”€â”€ start_server.sh           # æœåŠ¡å™¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ test_game.py              # APIæµ‹è¯•è„šæœ¬
â”œâ”€â”€ models/                   # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ ball.py              # çƒåˆ†é…æ¨¡å‹
â”‚   â””â”€â”€ game.py              # æ¸¸æˆçŠ¶æ€æ¨¡å‹
â”œâ”€â”€ services/                 # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ game_manager.py      # æ¸¸æˆçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ ball_calculator.py   # çƒä»·æ ¼è®¡ç®—
â”‚   â”œâ”€â”€ price_service.py     # ä»·æ ¼æœåŠ¡(å¾…é›†æˆasync-hyperliquid)
â”‚   â””â”€â”€ order_executor.py    # è®¢å•æ‰§è¡Œ(å¾…é›†æˆasync-hyperliquid)
â”œâ”€â”€ websocket/               # WebSocketå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ hyperliquid_client.py # Hyperliquid WebSocketå®¢æˆ·ç«¯
â”œâ”€â”€ api/                     # APIç«¯ç‚¹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ endpoints.py         # APIç«¯ç‚¹å®ç°
â””â”€â”€ utils/                   # å·¥å…·å‡½æ•°
    â”œâ”€â”€ __init__.py
    â””â”€â”€ helpers.py           # è¾…åŠ©å‡½æ•°
```

## å¿«é€Ÿå¼€å§‹

### 1. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
```bash
source venv/bin/activate
```

### 2. å¯åŠ¨æœåŠ¡å™¨
```bash
./start_server.sh
```
æˆ–è€…ç›´æ¥è¿è¡Œï¼š
```bash
python main.py
```

### 3. æµ‹è¯•API
```bash
python test_game.py
```

## APIç«¯ç‚¹

### 1. åŠ å…¥æ¸¸æˆ
```http
POST /api/v1/join
Content-Type: application/json

{
  "uuid": "your-unique-id"
}
```

**å“åº”:**
```json
{
  "ball": "B5"
}
```

### 2. è·å–æ¸¸æˆçŠ¶æ€
```http
GET /api/v1/status?uuid=your-unique-id
```

**å“åº”:**
```json
{
  "status": 1,
  "realtime_price": 45000.50,
  "final_price": 0.0,
  "balls": [
    {
      "ball_name": "B0",
      "target_price": 45045.00
    }
  ],
  "winner": ""
}
```

### 3. æ¸¸æˆä¿¡æ¯
```http
GET /api/v1/game/info
```

## æ¸¸æˆæµç¨‹

1. **å‡†å¤‡é˜¶æ®µ (status=0)**: ç­‰å¾…20ä¸ªå‚ä¸è€…åŠ å…¥
2. **æ¸¸æˆé˜¶æ®µ (status=1)**: å®æ—¶ä»·æ ¼æ›´æ–°ï¼Œ30ç§’åæ‰§è¡Œè®¢å•
3. **å®Œæˆé˜¶æ®µ (status=2)**: æ˜¾ç¤ºè·èƒœè€…å’Œæœ€ç»ˆç»“æœ

## é›†æˆç‚¹

### async-hyperliquidåº“é›†æˆ
ä»¥ä¸‹æ–‡ä»¶åŒ…å«å¾…é›†æˆçš„æ¥å£ï¼š

- `services/price_service.py`: BTCä»·æ ¼è·å–
- `services/order_executor.py`: è®¢å•æ‰§è¡Œå’Œå–æ¶ˆ
- `websocket/hyperliquid_client.py`: è®¢å•çŠ¶æ€ç›‘æ§

### å½“å‰å®ç°ç‰¹ç‚¹

- âœ… å®Œæ•´çš„æ¸¸æˆçŠ¶æ€ç®¡ç†
- âœ… çƒåˆ†é…å’Œä»·æ ¼è®¡ç®—
- âœ… RESTful APIæ¥å£
- âœ… é«˜é¢‘è½®è¯¢æ”¯æŒ
- âœ… é”™è¯¯å¤„ç†å’ŒçŠ¶æ€éªŒè¯
- ğŸ”„ æ¨¡æ‹Ÿä»·æ ¼æ•°æ® (å¾…æ›¿æ¢ä¸ºçœŸå®æ•°æ®)
- ğŸ”„ æ¨¡æ‹Ÿè®¢å•æ‰§è¡Œ (å¾…æ›¿æ¢ä¸ºçœŸå®è®¢å•)
- ğŸ”„ æ¨¡æ‹ŸWebSocketäº‹ä»¶ (å¾…æ›¿æ¢ä¸ºçœŸå®äº‹ä»¶)

## æ€§èƒ½ç‰¹ç‚¹

- æ”¯æŒ20ä¸ªå‚ä¸è€…åŒæ—¶é«˜é¢‘è½®è¯¢ (100msé—´éš”)
- å¼‚æ­¥å¤„ç†ï¼Œéé˜»å¡I/O
- å†…å­˜å­˜å‚¨ï¼Œå¿«é€Ÿå“åº”
- å®æ—¶ä»·æ ¼æ›´æ–°å’ŒçŠ¶æ€åŒæ­¥

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°çš„é›†æˆ
1. åœ¨ç›¸åº”çš„æœåŠ¡æ–‡ä»¶ä¸­å®ç°çœŸå®çš„æ•°æ®è·å–/è®¢å•æ‰§è¡Œé€»è¾‘
2. æ›¿æ¢æ¨¡æ‹Ÿå®ç°
3. æ›´æ–°é”™è¯¯å¤„ç†é€»è¾‘

### æµ‹è¯•
- ä½¿ç”¨ `test_game.py` è¿›è¡ŒAPIæµ‹è¯•
- æ”¯æŒå•å‚ä¸è€…å’Œå¤šå‚ä¸è€…æµ‹è¯•
- åŒ…å«å®Œæ•´æ¸¸æˆæµç¨‹æ¨¡æ‹Ÿ

## éƒ¨ç½²

è¿™æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§æ¼”ç¤ºç¨‹åºï¼Œè®¾è®¡ä¸ºå•æœåŠ¡å™¨éƒ¨ç½²ï¼š
- å†…å­˜å­˜å‚¨ï¼Œæ— éœ€æ•°æ®åº“
- æ”¯æŒ20ä¸ªå¹¶å‘ç”¨æˆ·
- é€‚åˆhackathonæ¼”ç¤ºç¯å¢ƒ

## ä¸‹ä¸€æ­¥

1. é›†æˆasync-hyperliquidåº“è¿›è¡ŒçœŸå®ä»·æ ¼è·å–
2. é›†æˆasync-hyperliquidåº“è¿›è¡ŒçœŸå®è®¢å•æ‰§è¡Œ
3. é›†æˆHyperliquid WebSocketè¿›è¡Œè®¢å•çŠ¶æ€ç›‘æ§
4. æ·»åŠ å‰ç«¯ç•Œé¢ç”¨äºhackathonæ¼”ç¤º


